<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="C:\Users\Lenovo\Soulix\fontawesome-free-7.0.1-web\fontawesome-free-7.0.1-web/all.min.css">


<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!-- Font Awesome CDN -->
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <script src="https://unpkg.com/lottie-web@5.7.13/build/player/lottie.min.js"></script>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Great+Vibes&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Imperial+Script&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Libertinus+Serif+Display&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital@0;1&family=Playwrite+ES+Deco+Guides&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Vinyl&family=Tangerine:wght@400;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap">;
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Great+Vibes&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Imperial+Script&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital@0;1&family=Playwrite+ES+Deco+Guides&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Vinyl&family=Tangerine:wght@400;700&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Great+Vibes&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Imperial+Script&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital@0;1&family=Playwrite+ES+Deco+Guides&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Vinyl&family=Tangerine:wght@400;700&display=swap" rel="stylesheet">


  <title>Soulix</title>
  <link rel="stylesheet" href="style.css">

</head>
<body>
  <div class="container">
    <!-- Navigation -->
<div class="nav">
  <!-- Logo Left -->
  <div class="logo">
    <img src="image/soulix logo.png" alt="Soulix Logo">
  </div>

  <!-- Menu Center -->
<div class="menu">
  <a href="index.html">
    <i class="fa-solid fa-house"></i> Home
  </a>
  <a href="about.html">
    <i class="fa-solid fa-circle-info"></i> About Us
  </a>
  <a href="contact.html">
    <i class="fa-solid fa-envelope"></i> Contact
  </a>
  <a href="service.html">
    <i class="fa-solid fa-gear"></i> Service
  </a>
  <a href="#">
  <i class="fa-solid fa-bolt"></i>Blog
  </a>
  <a href="dashboard.html">
  <i class="fa-solid fa-chart-line"></i> Dashboard
</a>
</div>


  <!-- Icons Right -->
  <div class="nav-icons">
    <i class="fas fa-search"></i>
    <a href="register.html"><i class="fas fa-user"></i>
    </a>
  </div>
</div>
<div class="search-overlay" id="searchOverlay">
  <span class="close-btn" id="closeSearch">&times;</span>
  <input type="text" placeholder="Type to search...">
</div>


    <!-- ‚úÖ HERO SECTION -->
<section id="home" class="hero">
  <div class="hero-text">
    <h1>Soulix</h1>
    <p>You don't have to struggle in silence!</p>
    <div class="button">
      <a href="join us.html"><i class="fa fa-play"></i> Join Us</a>
      <a href="see-more.html"><i class="fa fa-plus"></i> See More</a>
    </div>
  </div>

  <div class="hero-img">
    <img src="image/home page.png" alt="Soulix">
  </div>

  <!-- ‚úÖ Stats Section (inside hero) -->
  <div class="stats-section">
    <div class="stat stats-card">
      <h2>200+</h2><p>Activities</p>
    </div>
    <div class="stat stats-card">
      <h2>5K+</h2><p>Teens Helped</p>
    </div>
    <div class="stat stats-card">
      <h2>120+</h2><p>Experts</p>
    </div>
    <div class="stat stats-card">
      <h2>24/7</h2><p>Support</p>
    </div>
  </div>
</section>


<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<!-- Floating food items for effect -->
    <div class="floating-food food1">
    </div>
    <div class="floating-food food2"></div>
    <div class="floating-food food3"></div>
    <div class="floating-food food4"></div>
    <div class="floating-food food4"></div>
    <div class="floating-food food5"></div>
    <div class="floating-food food6"></div>
    <div class="floating-food food7"></div>
    <div class="floating-food food8"></div>
    <div class="floating-food food9"></div>
    <div class="floating-food food10"></div>
  

  
<script>
  const searchIcon = document.querySelector(".fa-search");
  const searchOverlay = document.getElementById("searchOverlay");
  const closeSearch = document.getElementById("closeSearch");

  searchIcon.addEventListener("click", () => {
    searchOverlay.classList.add("active");
  });

  closeSearch.addEventListener("click", () => {
    searchOverlay.classList.remove("active");
  });

  // Optional: Close with ESC key
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      searchOverlay.classList.remove("active");
    }
  });
</script>
<!-- ‚úÖ Chatbot Icon -->
    <div class="chatbot-wrapper" onclick="toggleSupport()">
    <div class="chatbot-icon" title="Support">
      <img src="image/chat bot.png" alt="Support">
    </div>
    <div class="chatbot-tooltip">Talk to Support</div>
  </div>

  <!-- Support window -->
  <div id="supportWindow" class="support-window" role="dialog" aria-label="Support chat">
    <div class="sw-header">
      <div class="title"><i class="fa-solid fa-headset"></i>&nbsp; Support</div>
      <div class="close" onclick="toggleSupport()">‚úï</div>
    </div>

    <div id="swBody" class="sw-body">
      <!-- quick chips -->
      <div class="chips" id="chipsContainer">
        <div class="chip" data-key="breathe">Breathe</div>
        <div class="chip" data-key="talk">Talk to someone</div>
        <div class="chip" data-key="music">Calm music</div>
        <div class="chip" data-key="tips">Stress tips</div>
      </div>

      <!-- messages -->
      <div id="messages" class="chat-messages" aria-live="polite">
        <div class="bubble bot">Hey üëã I am Support. You can type, speak, or pick a quick suggestion below.</div>
      </div>
    </div>

    <div class="sw-input">
      <div class="controls">
        <button id="micBtn" class="micro" title="Speak"><i class="fa-solid fa-microphone"></i></button>
        <button id="emojiBtn" class="emoji-btn" title="Emoji">üòä</button>
      </div>

      <div class="text-input">
        <input id="userInput" placeholder="Type a message or press mic..." aria-label="Message input"/>
      </div>

      <button id="sendBtn" class="send" title="Send">‚û§</button>

      <!-- emoji popup -->
      <div id="emojiMenu" class="emoji-menu" aria-hidden="true">
        <button class="emoji">üòä</button><button class="emoji">üëç</button><button class="emoji">üòü</button>
        <button class="emoji">üòå</button><button class="emoji">‚ù§Ô∏è</button>
      </div>
    </div>
  </div>

<script>
/* ---------- UI controls ---------- */
const supportWindow = document.getElementById('supportWindow');
const messages = document.getElementById('messages');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const micBtn = document.getElementById('micBtn');
const emojiBtn = document.getElementById('emojiBtn');
const emojiMenu = document.getElementById('emojiMenu');
const chips = document.getElementById('chipsContainer');

let open = false;
function toggleSupport(){
  open = !open;
  supportWindow.style.display = open ? 'flex' : 'none';
  if(open) userInput.focus();
}

/* add bubble */
function addBubble(text, who='bot'){
  const el = document.createElement('div');
  el.className = 'bubble ' + (who === 'user' ? 'user' : 'bot');
  el.textContent = text;
  messages.appendChild(el);
  messages.scrollTop = messages.scrollHeight;
}

/* show typing animation, returns element to remove later */
function showTyping(){
  const t = document.createElement('div');
  t.className = 'typing';
  t.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
  messages.appendChild(t);
  messages.scrollTop = messages.scrollHeight;
  return t;
}

/* chips click -> send keyword */
chips.addEventListener('click', e => {
  const chip = e.target.closest('.chip');
  if(!chip) return;
  const key = chip.dataset.key;
  userSend(key);
});

/* emoji handling */
emojiBtn.addEventListener('click', e=>{
  emojiMenu.style.display = emojiMenu.style.display === 'block' ? 'none' : 'block';
});
emojiMenu.addEventListener('click', e=>{
  const emoji = e.target.textContent;
  if(!emoji) return;
  userInput.value += emoji;
  emojiMenu.style.display = 'none';
  userInput.focus();
});

/* send button / enter key */
sendBtn.addEventListener('click', ()=> userSend(userInput.value || ''));
userInput.addEventListener('keydown', e => { if(e.key === 'Enter'){ userSend(userInput.value || ''); } });

/* ---------- Voice recognition (SpeechRecognition) ---------- */
let recognition = null;
let listening = false;
if('webkitSpeechRecognition' in window || 'SpeechRecognition' in window){
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SR();
  recognition.lang = 'en-US';
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;

  recognition.onresult = function(evt){
    const text = evt.results[0][0].transcript;
    userInput.value = text;
    userSend(text);
  };
  recognition.onend = function(){ listening=false; micBtn.innerHTML = '<i class="fa-solid fa-microphone"></i>'; }
  recognition.onerror = function(e){ console.error('speech error', e); listening=false; micBtn.innerHTML = '<i class="fa-solid fa-microphone"></i>'; }
} else {
  micBtn.title = 'Voice not supported';
  micBtn.style.opacity = 0.8;
}

/* mic button toggles recognition */
micBtn.addEventListener('click', ()=>{
  if(!recognition) return alert('Voice not supported in this browser');
  if(!listening){
    recognition.start();
    listening=true;
    micBtn.innerHTML = '<i class="fa-solid fa-microphone-lines"></i>';
  } else {
    recognition.stop();
    listening=false;
    micBtn.innerHTML = '<i class="fa-solid fa-microphone"></i>';
  }
});

/* ---------- Speech synthesis (bot voice) ---------- */
function speakText(text){
  if(!('speechSynthesis' in window)) return;
  const utter = new SpeechSynthesisUtterance(text);
  // Prefer a calm female voice if available
  const voices = speechSynthesis.getVoices();
  let chosen = voices.find(v => /female|woman|FEMALE|female/i.test(v.name)) || voices.find(v=> /en-?us/i.test(v.lang)) || voices[0];
  if(chosen) utter.voice = chosen;
  utter.rate = 0.95;
  utter.pitch = 1.0;
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

/* ---------- Chat send flow ---------- */
let pendingTypingEl = null;
async function userSend(raw){
  const text = (raw||'').toString().trim();
  if(!text) return;
  // show user bubble
  addBubble(text, 'user');
  userInput.value = '';
  // show typing
  const typingEl = showTyping();

  try {
    // call server /chat
    const res = await fetch('http://127.0.0.1:5000/chat', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({
        message: text,
        // if user logged in, you can put email here
        email: localStorage.getItem('soulix_user_email') || 'guest@soulix.com'
      })
    });

    const json = await res.json();
    typingEl.remove();
    // server returns { reply: "...", suggestions: [...], emoji: "üòä" }
    const reply = (json.reply || "Sorry, I couldn't process that. Try again.");
    addBubble(reply, 'bot');

    // optional: show server suggestions as chips
    if(Array.isArray(json.suggestions) && json.suggestions.length){
      // replace chips area
      const ctn = document.getElementById('chipsContainer');
      ctn.innerHTML = '';
      json.suggestions.slice(0,6).forEach(s => {
        const d = document.createElement('div'); d.className='chip'; d.textContent = s; d.dataset.key = s;
        ctn.appendChild(d);
      });
    }

    // optional emoji reaction
    if(json.emoji){
      const e = document.createElement('div'); e.className='bubble bot'; e.textContent = json.emoji; messages.appendChild(e);
    }

    // speak
    try{ speakText(reply); } catch(e){ /* ignore */ }

  } catch (err){
    typingEl.remove();
    addBubble("‚ö†Ô∏è Unable to reach server. Check connection.", 'bot');
    console.error(err);
  }
}

/* nice: close emoji menu when clicking outside */
document.addEventListener('click', e=>{
  if(!emojiMenu.contains(e.target) && !emojiBtn.contains(e.target)) emojiMenu.style.display='none';
});

/* open the support window initially collapsed (icon only) */
supportWindow.style.display = 'none';
</script>
 <!-- Bottom Icons -->
    <div class="bottom-icons">
      <img src="https://img.icons8.com/ios-filled/50/ffffff/headphones.png" alt="Headphones" />
      <img src="https://img.icons8.com/ios-filled/50/ffffff/virtual-reality.png" alt="VR" />
    </div>
  </div>

  

</body>
</html>
