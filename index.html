<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="C:\Users\Lenovo\Soulix\fontawesome-free-7.0.1-web\fontawesome-free-7.0.1-web/all.min.css">


<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!-- Font Awesome CDN -->
 <link rel="preconnect" href="https://fonts.googleapis.com">
 <script src="https://unpkg.com/lottie-web@5.7.13/build/player/lottie.min.js"></script>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Great+Vibes&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Imperial+Script&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Libertinus+Serif+Display&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital@0;1&family=Playwrite+ES+Deco+Guides&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Vinyl&family=Tangerine:wght@400;700&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap">;
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Great+Vibes&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Imperial+Script&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital@0;1&family=Playwrite+ES+Deco+Guides&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Vinyl&family=Tangerine:wght@400;700&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Great+Vibes&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Imperial+Script&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=Playfair+Display:ital@0;1&family=Playwrite+ES+Deco+Guides&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Vinyl&family=Tangerine:wght@400;700&display=swap" rel="stylesheet">


  <title>Soulix</title>
  <link rel="stylesheet" href="style.css">

</head>
<body>
  <div class="container">
    <!-- Navigation -->
<div class="nav">
  <!-- Logo Left -->
  <div class="logo">
    <img src="image/soulix logo.png" alt="Soulix Logo">
  </div>

  <!-- Menu Center -->
<div class="menu">
  <a href="index.html">
    <i class="fa-solid fa-house"></i> Home
  </a>
  <a href="about.html">
    <i class="fa-solid fa-circle-info"></i> About Us
  </a>
  <a href="contact.html">
    <i class="fa-solid fa-envelope"></i> Contact
  </a>
  <a href="service.html">
    <i class="fa-solid fa-gear"></i> Service
  </a>
  <a href="#">
  <i class="fa-solid fa-bolt"></i>Blog
  </a>
  <a href="dashboard.html">
  <i class="fa-solid fa-chart-line"></i> Dashboard
</a>
</div>


  <!-- Icons Right -->
  <div class="nav-icons">
    <i class="fas fa-search"></i>
    <a href="register.html"><i class="fas fa-user"></i>
    </a>
  </div>
</div>
<div class="search-overlay" id="searchOverlay">
  <span class="close-btn" id="closeSearch">&times;</span>
  <input type="text" placeholder="Type to search...">
</div>


    <!-- ‚úÖ HERO SECTION -->
   <section id="home" class="hero">
      <div class="hero-text">
        <h1>Soulix</h1>
        <p>You don't have to struggle in silence!</p>
        <div class="button">
          <a href="join us.html"><i class="fa fa-play"></i> Join Us</a>
          <a href="see-more.html"><i class="fa fa-plus"></i> See More</a>
        </div>
      </div>

      <div class="hero-img">
        <img src="image/home page.png" alt="Soulix">
      </div>

  
  <!-- ‚úÖ Stats Section (inside hero) -->
  <div class="stats-section">
    <div class="stat stats-card">
      <h2>200+</h2><p>Activities</p>
    </div>
    <div class="stat stats-card">
      <h2>5K+</h2><p>Teens Helped</p>
    </div>
    <div class="stat stats-card">
      <h2>120+</h2><p>Experts</p>
    </div>
    <div class="stat stats-card">
      <h2>24/7</h2><p>Support</p>
    </div>
  </div>
</section>
</div>

<!-- Now Reference Section outside -->
<section class="reference-body-full">
  <div class="reference-left">
    <p class="ref-kicker">Featured Insight</p>
    <h2 class="ref-title">The Tale of Healing</h2>
    <p class="ref-desc">
      Every story begins with pain, but within those pages, healing unfolds.  
      Discover how mindfulness and creative journaling can help teens express  
      emotions and rebuild confidence ‚Äî one page at a time.
    </p>
    <div class="ref-buttons">
      <button class="ref-btn primary">Explore Stories</button>
      <a href="join us.html"></a>
      <button class="ref-btn outline">Learn More</button>
    </div>
  </div>

  <div class="reference-right">
    <img src="image/Book1.png" alt="Open Book Art" class="ref-book">
  </div>
</section>
<!-- üßò‚Äç‚ôÄÔ∏è Meditation Section (Soulix Mint Theme) -->

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<section class="meditation-section">
    <!-- ‚òÅÔ∏è Cloud Animation Canvas -->
    <canvas id="cloudCanvas"></canvas>

    <!-- üåø Meditation Left Text -->
    <div class="meditation-left">
      <span class="med-tag">‚Ä¢ meditation</span>
      <h1 class="med-title">
        Healing is not a race <span class="divider">|</span>
        <span class="accent">it‚Äôs a rhythm</span><br>
      </h1>
      <p class="med-desc">
       Everyone blooms in their own season. Don‚Äôt rush your growth; let it unfold with kindness. The moments you call slow are the moments shaping¬†your¬†peace.
      </p>

      <div class="med-icons">
        <i class="fa-solid fa-leaf"></i>
        <i class="fa-solid fa-heart"></i>
        <i class="fa-solid fa-spa"></i>
      </div>

     <div class="med-buttons">
  <a href="#library" class="btn primary">Get started</a>
  <a href="#explore" class="btn ghost">Explore</a>
</div>
</div>

    <!-- üßò‚Äç‚ôÄÔ∏è Meditation Image -->
    <div class="meditation-center">
      <div class="med-shape">
        <img src="image/meditation1.jpg" alt="Meditation Pose" class="med-img" />
      </div>
    </div>
  </section>

  <script src="script.js"></script>
</section>
    <div class="floating-food food4"></div>
    <div class="floating-food food5"></div>
    <div class="floating-food food6"></div>
    <div class="floating-food food7"></div>
    <div class="floating-food food8"></div>
    <div class="floating-food food9"></div>
    <div class="floating-food food10"></div>
  

  
<script>
  const searchIcon = document.querySelector(".fa-search");
  const searchOverlay = document.getElementById("searchOverlay");
  const closeSearch = document.getElementById("closeSearch");

  searchIcon.addEventListener("click", () => {
    searchOverlay.classList.add("active");
  });

  closeSearch.addEventListener("click", () => {
    searchOverlay.classList.remove("active");
  });

  // Optional: Close with ESC key
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      searchOverlay.classList.remove("active");
    }
  });
</script>

<!-- Chatbot Icon -->
<div class="chatbot-wrapper" style="z-index:3000">
  <div class="chatbot-icon" onclick="toggleSupport()" title="Support">
    <img src="image/chat bot.png" alt="Support">
  </div>
  <div class="chatbot-tooltip">Talk to Support</div>
</div>

<!-- Support window -->
<div id="supportWindow" class="support-window" role="dialog" aria-label="Support chat">
  <div class="sw-header">
    <div class="title"><i class="fa-solid fa-headset"></i>&nbsp; Support</div>
    
    <!-- üìú Chat History Button (inside header) -->
    


    <div class="close" onclick="toggleSupport()">‚úï</div>
  </div>

  <div id="swBody" class="sw-body">
<div class="chip-container">
  <div class="chip meditate"><i class="fas fa-spa"></i> Meditate</div>
  <div class="chip walk"><i class="fas fa-shoe-prints"></i> Go for a walk</div>
  <div class="chip hydrate"><i class="fas fa-tint"></i> Drink water</div>
  <div class="chip journal"><i class="fas fa-pen-nib"></i> Write your thoughts</div>
  <div class="chip laugh"><i class="fas fa-laugh-beam"></i> Watch something funny</div>
  <div class="chip sleep"><i class="fas fa-moon"></i> Take a nap</div>
  <div class="chip breathe"><i class="fas fa-wind"></i> Take deep breaths</div>
  <div class="chip stretch"><i class="fas fa-child"></i> Do a light stretch</div>
  <div class="chip music"><i class="fas fa-music"></i> Listen to music</div>
  <div class="chip nature"><i class="fas fa-leaf"></i> Step into nature</div>
  <div class="chip text"><i class="fas fa-comment-dots"></i> Text a friend</div>
  <div class="chip gratitude"><i class="fas fa-heart"></i> Gratitude list</div>
  <div class="chip art"><i class="fas fa-paint-brush"></i> Draw or doodle</div>
  <div class="chip affirm"><i class="fas fa-sun"></i> Say an affirmation</div>
  <div class="chip disconnect"><i class="fas fa-power-off"></i> Take a digital break</div>
  <div class="chip read"><i class="fas fa-book-open"></i> Read a few pages</div>
  <div class="chip selfcare"><i class="fas fa-hand-holding-heart"></i> Self-care act</div>
  <div class="chip smile"><i class="fas fa-smile"></i> Smile a little</div>
  <div class="chip plan"><i class="fas fa-calendar-check"></i> Plan something nice</div>
  <div class="chip hug"><i class="fas fa-hands"></i> Give yourself a hug ü§ç</div>
</div>


    <div id="messages" class="chat-messages" aria-live="polite">
      <div class="bubble bot">Hey üëã I‚Äôm Support. You can type, speak, or pick a quick suggestion below.</div>
    </div>
  </div>

  <div class="sw-input" style="position:relative;">
    <div class="controls">
      <button id="micBtn" class="micro" title="Speak"><i class="fa-solid fa-microphone"></i></button>
      <button id="kbdBtn" class="kbd-btn" title="Emoji, GIFs, Stickers">üòä</button>
    </div>

    <div class="text-input">
      <input id="userInput" placeholder="Type a message or press mic..." aria-label="Message input" />
    </div>

    <button id="sendBtn" class="send" title="Send">‚û§</button>

    <!-- keyboard panel -->
    <div id="keyboardPanel" class="keyboard-panel" aria-hidden="true">
      <div class="kb-tabs" role="tablist">
        <button class="tab-btn active" data-tab="emoji" role="tab">Emoji</button>
        <button class="tab-btn" data-tab="gifs" role="tab">GIFs</button>
        <button class="tab-btn" data-tab="stickers" role="tab">Stickers</button>
      </div>

      <div class="kb-search">
        <input id="kbSearch" placeholder="Search GIFs / Stickers..." />
        <div style="width:10px"></div>
      </div>

      <div class="kb-content">
        <div class="tab-page" data-page="emoji">
          <div class="recent-row" id="emojiRecentRow" aria-hidden="true"></div>
          <div class="emoji-grid" id="emojiGrid"></div>
        </div>

        <div class="tab-page" data-page="gifs" style="display:none">
          <div class="recent-row" id="gifRecentRow"></div>
          <div class="media-grid" id="gifGrid"></div>
        </div>

        <div class="tab-page" data-page="stickers" style="display:none">
          <div class="recent-row" id="stickerRecentRow"></div>
          <div class="media-grid" id="stickerGrid"></div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
/* ---------------- Basic UI & Chat flow ---------------- */
const supportWindow = document.getElementById('supportWindow');
const messages = document.getElementById('messages');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const micBtn = document.getElementById('micBtn');
const chips = document.getElementById('chipsContainer');

let open = false;
function toggleSupport() {
  open = !open;
  supportWindow.style.display = open ? 'flex' : 'none';
  if (!open) hideKeyboard();
  if (open) userInput.focus();
}
supportWindow.style.display = 'none';

function addBubble(text, who = 'bot') {
  const el = document.createElement('div');
  el.className = 'bubble ' + (who === 'user' ? 'user' : 'bot');
  el.textContent = text;
  messages.appendChild(el);
  messages.scrollTop = messages.scrollHeight;
}

/* ---------------- Typing Animation ---------------- */
function showTyping() {
  const t = document.createElement('div');
  t.className = 'typing';

  // Typing animation text
  const textSpan = document.createElement('span');
  textSpan.className = 'typing-text';
  textSpan.textContent = "Typing";

  const dots = document.createElement('span');
  dots.className = 'dots';
  dots.innerHTML = '<span>.</span><span>.</span><span>.</span>';

  t.appendChild(textSpan);
  t.appendChild(dots);
  messages.appendChild(t);
  messages.scrollTop = messages.scrollHeight;

  // Rotating messages (Typing ‚Üí Thinking ‚Üí Almost ready ‚Üí Formulating reply)
  const texts = ["Typing", "Thinking", "Almost ready", "Formulating reply"];
  let index = 0;
  const interval = setInterval(() => {
    index = (index + 1) % texts.length;
    textSpan.textContent = texts[index];
  }, 2000);

  // Cleanup when typing stops
  t.cleanup = () => clearInterval(interval);

  return t;
}

/* ---------------- Message Sending ---------------- */
sendBtn.addEventListener('click', () => userSend(userInput.value || ''));
userInput.addEventListener('keydown', e => {
  if (e.key === 'Enter') {
    userSend(userInput.value || '');
  }
});

/* ---------------- Smart Greeting by Name ---------------- */
window.addEventListener('load', () => {
  // Clear any hardcoded message
  const messagesBox = document.getElementById("messages");
  if (messagesBox) messagesBox.innerHTML = "";

  // Try fetching user's name from storage (added during login/signup)
  const storedUser = localStorage.getItem("soulix_user_name");
  const userEmail =
    localStorage.getItem("soulix_user_email") ||
    sessionStorage.getItem("user_email");

  if (storedUser) {
    addBubble(`Welcome back üåø ${storedUser}! I'm here if you need me. üí¨`, "bot");
  } else if (userEmail) {
    const username = userEmail.split("@")[0];
    addBubble(`Welcome back üåø ${username}! I'm here if you need me. üí¨`, "bot");
  } else {
    addBubble("Hey üëã I'm Support. You can type, speak, or pick a quick suggestion below.", "bot");
  }
});

/* ---------------- Send User Message ---------------- */
async function userSend(raw) {
  const text = (raw || '').toString().trim();
  if (!text) return;

  addBubble(text, 'user');
  userInput.value = '';
  hideKeyboard();

  const t = showTyping();

  try {
    // ‚úÖ Get logged-in user info safely
    const userName = localStorage.getItem("soulix_user_name") || "Guest";
    const userEmail =
      localStorage.getItem("soulix_user_email") ||
      sessionStorage.getItem("user_email") ||
      "guest@soulix.com";

    // ‚úÖ Send message to backend
    const res = await fetch("http://127.0.0.1:5000/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        message: text,
        email: userEmail,
        name: userName
      }),
      credentials: "include"
    });

    const data = await res.json();
    if (t.cleanup) t.cleanup();
    t.remove();

    const reply = data.reply || "Sorry üòî I didn‚Äôt understand that.";
    addBubble(reply, 'bot');

    // üéôÔ∏è Voice Reply
    if ('speechSynthesis' in window) {
      const u = new SpeechSynthesisUtterance(reply);
      u.rate = 0.95;
      u.pitch = 1.0;
      speechSynthesis.cancel();
      speechSynthesis.speak(u);
    }

  } catch (err) {
    if (t.cleanup) t.cleanup();
    t.remove();
    addBubble("‚ö†Ô∏è Connection error ‚Äî offline mode active.", 'bot');
    console.error(err);
  }
}


/* ---------------- Speech Recognition (Mic) ---------------- */
let recognition = null, listening = false;
if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SR();
  recognition.lang = 'en-US';
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;
  recognition.onresult = function (evt) {
    const text = evt.results[0][0].transcript;
    userInput.value = text;
    userSend(text);
  };
  recognition.onend = function () {
    listening = false;
    micBtn.innerHTML = '<i class="fa-solid fa-microphone"></i>';
  };
  recognition.onerror = function (e) {
    console.error('speech error', e);
    listening = false;
    micBtn.innerHTML = '<i class="fa-solid fa-microphone"></i>';
  };
} else {
  micBtn.title = 'Voice not supported';
  micBtn.style.opacity = 0.8;
}
micBtn.addEventListener('click', () => {
  if (!recognition) return alert('Voice not supported in this browser');
  if (!listening) {
    recognition.start();
    listening = true;
    micBtn.innerHTML = '<i class="fa-solid fa-microphone-lines"></i>';
  } else {
    recognition.stop();
    listening = false;
    micBtn.innerHTML = '<i class="fa-solid fa-microphone"></i>';
  }
});
/* ---------------- Chat History ---------------- */
async function loadChatHistory() {
  try {
    const email = sessionStorage.getItem("user_email");
    if (!email) {
      addBubble("‚ö†Ô∏è Please login to view your chat history.", "bot");
      return;
    }

    const res = await fetch(`http://127.0.0.1:5000/chat-history?email=${email}`);
    const data = await res.json();

    if (!data.history) {
      addBubble("No chat history found üí¨", "bot");
      return;
    }

    messages.innerHTML = ""; // clear chat window

    const sections = ["Today", "Yesterday", "Older"];
    for (let sec of sections) {
      if (data.history[sec].length > 0) {
        const header = document.createElement("div");
        header.className = "history-header";
        header.textContent = sec;
        messages.appendChild(header);

        data.history[sec].forEach(chat => {
          addBubble(chat.user_message, "user");
          addBubble(chat.bot_reply, "bot");
        });
      }
    }

    messages.scrollTop = messages.scrollHeight;
  } catch (err) {
    console.error("‚ö†Ô∏è History error:", err);
    addBubble("‚ö†Ô∏è Failed to load chat history.", "bot");
  }
}

/* Button to view history */
document.getElementById("historyBtn")?.addEventListener("click", loadChatHistory);

/* ---------------- Keyboard Panel Logic ---------------- */
const kbdBtn = document.getElementById('kbdBtn');
const keyboardPanel = document.getElementById('keyboardPanel');
const tabBtns = Array.from(document.querySelectorAll('.tab-btn'));
const tabPages = Array.from(document.querySelectorAll('.tab-page'));
const kbSearch = document.getElementById('kbSearch');
const emojiGrid = document.getElementById('emojiGrid');
const gifGrid = document.getElementById('gifGrid');
const stickerGrid = document.getElementById('stickerGrid');
const emojiRecentRow = document.getElementById('emojiRecentRow');
const gifRecentRow = document.getElementById('gifRecentRow');
const stickerRecentRow = document.getElementById('stickerRecentRow');

let activeTab = 'emoji';
let kbOpen = false;

/* ---------------- Emoji / GIF / Sticker Data ---------------- */
const EMOJIS = ["ü¶¶","‚òò","üçÇ","üåû","üåô","ü•≤","üòÄ","üòÉ","üòÑ","üòÅ","üòÜ","ü•π","üòÖ","üòÇ","üòâ","üôÉ","üôÇ","üòá","üòä","‚ò∫","ü§£","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòé","ü§ì","üßê","ü§®","ü§™","üòú","üòù","üòõ","ü•∏","ü§©","ü•≥","üòè","üòí","üòû","üòî","üò©","üòü","ü•∫","üòï","üò¢","üôÅ","üò≠","‚òπ","üò§","üò£","üò†","üòñ","üò°","üò´","ü§¨","üò∞","üò®","üò±","üò∂‚Äçüå´","ü•∂","ü•µ","üò≥","ü§Ø","üò•","üòì","ü§ó","ü§î","ü´£","ü§≠","ü´¢","ü´°","ü§´","ü´†","ü§•","üò∂","ü´•","üòê","ü´§","üòë","üò≤","üòÆ","üòß","üò¶","üòØ","üôÑ","üò¨","ü´®","ü•±","ü§ê","ü´©","ü•¥","üò¥","ü§¢","ü§§","ü§Æ","üò™","ü§ß","üòÆ‚Äçüí®","üò∑","üòµ","ü§í","üòµ‚Äçüí´","ü§ï","ü§ë","ü§†","üòà","üëø","üëπ","üë∫","ü§°","üí©","üò∫","üéÉ","ü§ñ","üëæ","üëΩ","‚ò†","üíÄ","üëª","üò∏","üòπ","üòª","üòº","üòΩ","üôÄ","üòø","üòæ","üëéüèª","üëç","ü§ù","üëè","üôå","üëêüèª","ü§≤","ü´∂","üëä","‚úä","ü´∏","ü´∑","ü§û","‚úå","ü´∞","ü§ü","ü§ò","üëå","ü§å","ü§è","ü´≥","ü´¥","üëà","üëâ","üëÜ","üëá","‚òù","‚úã","ü§ö","üëã","ü§ô","ü´≤","ü´±","üí™","ü¶æ","‚úç","üôè","ü´µ","ü¶∂","ü¶µ","ü¶ø","üíÑ","üíã","ü´Ü","üëÉ","ü¶ª","üëÇ","ü¶∑","üëÑ","üë£","üëÅ","üëÄ","ü´Ä","ü´Å","üß†","üó£","üë§","üßë","üë©","üë¶","üßí","üëßüèª","üë∂","ü´Ç","üë•","üë®","üë©‚Äçü¶≥","üßë‚Äçü¶≥","üßï","üíÇ‚Äç‚ôÇ","üïµ","üë©‚Äç‚öï","üßë‚Äç‚öï","üë®‚Äçüéì","üë∏","ü´Ö","üßú‚Äç‚ôÄ","üôá‚Äç‚ôÄ","üôá","ü§¶‚Äç‚ôÇ","ü§¶‚Äç‚ôÄ","üíÜ‚Äç‚ôÇ","üßñ‚Äç‚ôÄ","üíÜ‚Äç‚ôÄ","üßñ","üíÖ","üíÉ","üßé‚Äç‚ôÄ","üèÉ‚Äç‚ôÄ","üèÉ‚Äç‚ôÇ","üë©‚Äç‚ù§Ô∏è‚Äçüë®","üë©‚Äç‚ù§Ô∏è‚Äçüë©","üß∂","üßµ","ü™°","üß•","ü•º","ü¶∫","üëö","üëï","üëò","üëó","üëî","üëñ","ü•ª","ü©¥","ü•ø","üë†","üë°","üë¢","üëû","üëü","üéì","üëí","üß¢","üé©","üß£","üß§","üß¶","ü•æ","‚õë","ü™ñ","üéí","üß≥","üëë","üëì","üíç","üï∂","ü•Ω","üëù","üëõ","üåÇ","üëú","üíº","üê∂","üê±","üêª‚Äç‚ùÑ","üê®","üê≠","üêØ","üêπ","ü¶Å","üê∞","üêÆ","ü¶ä","üê∑","üêª","üêΩ","üêº","üê∏","üêµ","üôà","üôâ","üôä","üêí","üêî","üêß","üê¶","ü¶â","ü¶Ö","üê¶‚Äç‚¨õ","ü¶Ü","ü™ø","üê•","üê£","üê§","ü¶á","üêõ","üê∫","ü¶ã","üêó","üêå","üê¥","üêû","ü¶Ñ","üêú","ü´é","ü™∞","üêù","ü™≤","ü™±","ü™≥","ü¶é","üêç","üê¢","ü¶Ç","üï∏","üï∑","ü¶ó","ü¶ü","ü¶ñ","üê°","ü¶ï","üê†","üêô","üêü","ü¶ë","üê¨","ü™º","üê≥","ü¶ê","üêã","ü¶û","ü¶à","ü¶≠","ü¶Ä","üêä","ü¶õ","üêÖ","ü¶è","üêÜ","üê™","ü¶ì","üê´","ü¶ç","ü¶ò","ü¶ß","ü¶£","ü¶¨","üêÉ","üêò","üêÇ","üêÑ","üêê","ü¶å","ü´è","üêï","üêé","üê©","üêñ","ü¶Æ","üêï‚Äçü¶∫","üêè","üêë","ü¶ô","üêà‚Äç‚¨õ","üêà","ü¶¢","ü¶ú","ü¶ö","ü¶§","ü¶É","üêì","ü™Ω","ü™∂","ü¶©","ü¶•","üïä","üêÅ","üêá","üêÄ","ü¶ù","üêø","ü¶®","ü¶î","ü¶°","üêæ","ü¶´","üêâ","üê≤","ü¶¶","ü™µ","ü™æ","üå¥","üå≥","üå≤","üéÑ","üåµ","üê¶‚Äçüî•","üå±","üåø","üçÇ","üçÅ","‚òò","ü™∫","ü™π","üçÄ","üéç","üçÑ","ü™¥","üéã","üçÉ","ü™∏","üêö","ü™∑","ü™ª","ü•Ä","üåπ","üå∑","üíê","üåæ","ü™®","üå∫","üå∏","üåº","üåª","üåû","üåù","üåõ","üåú","üåö","üåî","üåï","üåô","üåñ","üåé","üåó","üåç","üåò","üåè","üåë","ü™ê","üåí","üí´","üåì","‚≠ê","üåà","üå™","üî•","üí•","‚òÑ","‚ö°","‚ú®","üåü","‚òÄ","üå§","üå©","üå®","‚õÖ","‚ùÑ","üå•","‚òÉ","‚òÅ","‚õÑ","üå¶","üå¨","üí®","üåß","‚õà","üíß","üå´","üåä","‚òÇ","‚òî","ü´ß","üí¶","üçè","üçá","üçé","üçì","üçê","ü´ê","üçä","üçà","üçã","üçí","üçë","üçå","üçâ","üçç","ü•≠","ü••","ü•ù","üçÖ","üçÜ","ü•ë","ü´õ","ü•¶","ü•¨","üßÖ","üßÑ","ü´í","ü•ï","üåΩ","ü´ë","üå∂","ü•í","ü•î","ü•®","ü´ú","üßÄ","üç†","ü•ö","ü´ö","üç≥","ü•ê","üßà","ü•Ø","ü•û","üçû","üßá","ü•ñ","ü•ì","üçï","üçü","üçî","üå≠","ü¶¥","üçñ","üçó","ü•©","ü´ì","ü•™","ü•ô","üßÜ","üåÆ","üåØ","ü´î","ü•ó","üçõ","üç≤","üçú","üçù","ü´ô","ü•´","ü´ï","ü•ò","üç£","üç±","ü•ü","ü¶™","üç§","üçô","üçö","üçò","üç¶","üç®","üçß","üç°","üç¢","ü•Æ","ü•†","üç•","ü•ß","üßÅ","üç©","üçø","üç∞","üç™","üéÇ","üå∞","üçÆ","ü•ú","üç≠","ü´ò","üç¨","üçØ","üç´","ü•õ","üßã","ü•§","üßÉ","üçµ","‚òï","ü´ñ","üçº","ü´ó","üç∂","üßâ","üç∫","üçæ","üçª","üßä","ü•Ç","ü•Ñ","üç¥","üç∑","ü•É","ü•£","üç∏","ü•°","üçπ","üßÇ","ü•¢","‚öΩ","ü•è","üèÄ","üé±","üèà","ü™Ä","‚öæ","üèì","ü•é","üè∏","üéæ","üèí","üèê","üèë","üèâ","ü•ç","üèè","ü§ø","ü™É","ü•ä","ü•Ö","‚õ≥","ü™Å","üõù","üèπ","üé£","‚õ∏","üõ∑","üõº","üõπ","üéΩ","ü•ã","ü•ä","ü§ø","ü•å","üéø","‚õ∑","üèÇ","ü™Ç","ü§∏","üèã‚Äç‚ôÄ","üèã","üèã‚Äç‚ôÇ","ü§º‚Äç‚ôÄ","ü§º","ü§∏‚Äç‚ôÄ","ü§∏","‚õπ‚Äç‚ôÄ","‚õπ","ü§∫","ü§æ‚Äç‚ôÄ","üßò‚Äç‚ôÄ","üßò","üèÜ","ü•á","ü•â","üèÖ","üéñ","üèµ","üé≠","ü§π‚Äç‚ôÇ","ü§π","ü§π‚Äç‚ôÄ","üé™","üéü","üé´","üéó","ü©∞","üé®","ü´ü","üé¨","üé§","üéß","üéº","ü™ï","üé∏","ü™ó","üé∫","üé∑","ü™ò","ü•Å","ü™á","ü™â","üéª","ü™à","üé≤","‚ôü","üéØ","üé≥","üéÆ","üß©","üé∞","üöó","üöí","üöï","üöê","üöô","üõª","üöå","üöö","üöé","üöõ","üöú","üèé","üöì","üöë","ü¶Ω","ü¶Ø","üöú","üöõ","üöö","üõª","üöê","üöí","ü¶º","ü©º","üõ¥","üö≤","üõµ","üèç","üõ∫","üõû","üöü","üö†","üö°","üöñ","üöò","üöç","üöî","üö®","üöÉ","üöÜ","üöã","üöá","üöû","üöä","üöù","üöâ","üöÑ","‚úà","üöÖ","üõ´","üöà","üõ¨","üöÇ","üõ©","üí∫","üõ∞","üöÄ","üõ∏","üöÅ","üõ∂","‚õµ","üö§","‚õΩ","ü™ù","‚öì","üõü","üö¢","‚õ¥","üõ≥","üõ•","üöß","üö¶","üö•","üöè","üó∫","üóø","üóΩ","üóº","‚õ±","‚õ≤","üé†","üé¢","üé°","üèü","üèØ","üè∞","üèñ","üèù","üèú","üåã","‚õ∞","üèî","üóª","üèï","üè≠","üèó","üèö","üèò","üè°","üè†","üõñ","‚õ∫","üè¢","üè¨","üè£","üè§","üè¶","üè®","üè™","üè´","üïã","üè©","‚õ©","üíí","üõ§","üèõ","üõ£","‚õ™","üóæ","üïå","üéë","üïç","üèû","üõï","üåÖ","üåÉ","üèô","üåÜ","üéÜ","üéá","üå†","üåÑ","üåå","üåâ","üåÅ"];
const DEMO_GIFS = [
  "https://media.giphy.com/media/3o6ZsY1f3kqv1u6x0w/giphy.gif",
  "https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif"
];
const DEMO_STICKERS = [
  "https://cdn.pixabay.com/photo/2023/03/02/10/41/penguin-7828315_1280.png",
  "https://i.pinimg.com/originals/8a/54/3f/8a543ffdb0533b43c248c5630191db7d.png",
  "https://i.pinimg.com/originals/f9/0d/3e/f90d3e56cf37da7e76df6a3b05f4ab17.png"
];

/* ---------------- Show / Hide Keyboard ---------------- */
function showKeyboard() {
  keyboardPanel.style.display = 'block';
  keyboardPanel.setAttribute('aria-hidden', 'false');
  kbOpen = true;
}
function hideKeyboard() {
  keyboardPanel.style.display = 'none';
  keyboardPanel.setAttribute('aria-hidden', 'true');
  kbOpen = false;
}
kbdBtn.addEventListener('click', e => {
  e.stopPropagation();
  if (kbOpen) hideKeyboard();
  else { showKeyboard(); setActiveTab('emoji'); loadActiveTab(); }
});
document.addEventListener('click', e => {
  if (!keyboardPanel.contains(e.target) && !kbdBtn.contains(e.target)) hideKeyboard();
});

/* ---------------- Tab Switching ---------------- */
tabBtns.forEach(btn => btn.addEventListener('click', () => setActiveTab(btn.dataset.tab)));
function setActiveTab(t) {
  activeTab = t;
  tabBtns.forEach(b => b.classList.toggle('active', b.dataset.tab === t));
  tabPages.forEach(p => p.style.display = (p.dataset.page === t) ? 'block' : 'none');
  kbSearch.value = '';
  loadActiveTab(true);
}

/* ---------------- Load Tab Content ---------------- */
async function loadActiveTab(reset = false) {
  if (activeTab === 'emoji') renderEmojis();
  else if (activeTab === 'gifs') renderGIFs();
  else if (activeTab === 'stickers') renderStickers();
}

/* ---------------- Emojis ---------------- */
function renderEmojis() {
  emojiGrid.innerHTML = '';
  EMOJIS.forEach(e => {
    const cell = document.createElement('div');
    cell.className = 'emoji-cell';
    cell.textContent = e;
    cell.addEventListener('click', () => {
      userInput.value += e;
      hideKeyboard();
      saveRecent('emoji', e);
    });
    emojiGrid.appendChild(cell);
  });
}

/* ---------------- GIFs ---------------- */
function renderGIFs() {
  gifGrid.innerHTML = '';
  DEMO_GIFS.forEach(src => {
    const img = document.createElement('img');
    img.src = src;
    img.className = 'gif';
    img.addEventListener('click', () => { sendMedia(src); saveRecent('gif', { url: src }); });
    gifGrid.appendChild(img);
  });
}

/* ---------------- Stickers ---------------- */
async function renderStickers() {
  stickerGrid.innerHTML = '';
  const q = (kbSearch.value || '').toLowerCase();

  try {
    const res = await fetch('stickers.json', { cache: 'no-store' });
    if (res.ok) {
      const all = await res.json();
      const list = q ? all.filter(s => (s.url || '').toLowerCase().includes(q)) : all;
      list.forEach(s => {
        const img = document.createElement('img');
        img.src = s.url;
        img.alt = s.alt || 'sticker';
        img.style.width = '80px';
        img.style.height = '80px';
        img.style.objectFit = 'contain';
        img.addEventListener('click', () => { sendMedia(s); saveRecent('sticker', s); });
        stickerGrid.appendChild(img);
      });
      return;
    }
  } catch (err) {
    console.warn("‚ö†Ô∏è stickers.json not found, using fallback.");
  }

  DEMO_STICKERS.forEach(s => {
    const img = document.createElement('img');
    img.src = s;
    img.className = 'sticker';
    img.addEventListener('click', () => { sendMedia(s); saveRecent('sticker', { url: s }); });
    stickerGrid.appendChild(img);
  });
}

/* ---------------- Search ---------------- */
kbSearch.addEventListener('input', () => {
  if (activeTab === 'emoji') renderEmojis();
  if (activeTab === 'gifs') renderGIFs();
  if (activeTab === 'stickers') renderStickers();
});

/* ---------------- Media Sending ---------------- */
function sendMedia(item) {
  const url = item.url || item;
  const div = document.createElement('div');
  div.className = 'bubble user';
  const img = document.createElement('img');
  img.src = url;
  img.style.width = '140px';
  img.style.height = '140px';
  img.style.borderRadius = '10px';
  img.style.objectFit = 'cover';
  div.appendChild(img);
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
  hideKeyboard();
}

/* ---------------- Save Recent ---------------- */
function saveRecent(type, item) {
  const key = 'kb_recent_' + type;
  let arr = JSON.parse(localStorage.getItem(key) || '[]');
  if (type === 'emoji') {
    arr = arr.filter(x => x !== item);
    arr.unshift(item);
  } else {
    const url = item.url || item;
    arr = arr.filter(x => (x.url || x) !== url);
    arr.unshift(typeof item === 'string' ? { url: item } : item);
  }
  localStorage.setItem(key, JSON.stringify(arr.slice(0, 30)));
}

/* ---------------- Init ---------------- */
setActiveTab('emoji');
keyboardPanel.addEventListener('click', e => e.stopPropagation());
</script>



<!-- üåø Bottom Floating Icons -->
<div class="bottom-icons">
  <a href="#" title="Music Therapy">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/headphones.png" alt="Headphones" />
  </a>

  <a href="Game zone." title="Virtual Calm Space">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/virtual-reality.png" alt="VR" />
  </a>

  <a href="journal.html" title="My Journal">
    <img src="https://img.icons8.com/?size=100&id=38390&format=png&color=000000.png" alt="Journal" />
  </a>
</div>
<footer class="pastel-footer">
  <div class="footer-glass-layer"></div>

  <!-- üåø Center Logo with Circle -->
  <div class="footer-logo-circle">
    <img src="image/soulix logo.png" alt="Soulix Logo" />
  </div>

  <div class="footer-links-top">
    <a href="#about">About Us</a>
    <a href="#contact">Events</a>
    <a href="#service">Consultations</a>
    <a href="#blog">Our Joy Family</a>
  </div>

  <div class="footer-columns">
    <div class="footer-col">
      <h4>Contact</h4>
      <p>248.876.0833</p>
      <p>info@soulix.com</p>
      <p>506 Serenity Street<br />Pune, Maharashtra</p>
    </div>

    <div class="footer-col">
      <h4>Hours</h4>
      <p><em>*by appointment only*</em></p>
      <p>Tues, Thurs, & Fri | 11AM‚Äì5PM</p>
      <p>Wed & Sat | 11AM‚Äì7PM</p>
      <p>Closed Sunday & Monday</p>
    </div>

    <div class="footer-col">
      <h4>Information</h4>
      <a href="#contact">Contact Us</a><br />
      <a href="#collections">Browse Collections</a><br />
      <a href="#terms">Terms & Conditions</a><br />
      <a href="#privacy">Privacy Policy</a>
    </div>
  </div>

  <div class="footer-social">
    <p>Let‚Äôs connect</p>
    <div class="social-icons">
      <a href="#"><i class="fab fa-facebook-f"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-pinterest"></i></a>
    </div>
  </div>

  <div class="footer-subscribe">
    <p>Stay in the know with Soulix</p>
    <div class="subscribe-box">
      <input type="email" placeholder="Enter your email" />
      <button>‚û§</button>
    </div>
  </div>

  <div class="footer-bottom">
    <p>¬© 2025 Soulix ‚Ä¢ Designed with calm & clarity üåø</p>
  </div>
</footer>

</body>
</html>
